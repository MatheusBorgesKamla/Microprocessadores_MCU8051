	ORG 0
	SJMP PROG
	
	ORG 0003H ;INTERRUPCAO EXTERNA 0
	SJMP EXT0

	ORG 000BH ;INTERRUPCAO TIMER 0
	SJMP TIM0
	
	ORG 0013H ;INTERRUPCAO EXTERNA 1
	SJMP EXT1
	
PROG:	MOV P3, #00
	MOV TMOD, #00000001B
	SETB IT0
	SETB IT1
	MOV IE, #10000111B

K2:	JB 25H.0, K1
	MOV TH0, #0FFH
	MOV TL0, #19H
	SETB TR0
	SETB P3.0
UM2:	JNB P3.0, ZERO2
	SETB 25H.2
	SJMP UM2
ZERO2:	JB P3.0, K2
	CLR 25H.2
	SJMP ZERO2

K1:	JNB 25H.0, K2
	MOV TH1, #0FEH
	MOV TL1, #32H
	SETB TR1
	SETB P3.0
UM1:	JNB P3.0, ZERO1
	SETB 25H.2
	SJMP UM1
ZERO1:	JB P3.0, K1
	CLR 25H.2
	SJMP ZERO1

EXT0:	CLR EA
	SETB 25H.0
	SETB EA
	RETI

TIM0:	CLR EA
	JB 25H.0, K1INT
	JB 25H.2, ZERAR2
	SETB P3.0
	SJMP FIM2
ZERAR2:	CLR P3.0
	MOV TH0, #0FFH
	MOV TL0, #19H
	SETB TR0
FIM2:	SETB EA
	RETI
K1INT:	JB 25H.2, ZERAR1
	SETB P3.0
	SJMP FIM1
ZERAR1:	CLR P3.0
	MOV TH1, #0FEH
	MOV TL1, #32H
	SETB TR1
FIM1:	SETB EA
	RETI

EXT1:	CLR EA
	CLR 25H.0
	SETB EA
	RETI
	END