	ORG 0
	SJMP PROG
	
	ORG 0003H
	SJMP INTE0

	ORG 0013H
	SJMP INTE1

PROG:	MOV P2, #00H
	MOV P1, #00H
	MOV TCON, #00000101B
	MOV IE, #10000101B
	MOV 25H , #00H
	MOV A, #03H


VOLTA:	;ABAIXANDO O RECIPIENTE
	SETB P2.7
	SETB P2.6
	;ESPERA PELA INTERRUPCAO DO SENSOR1
	JNB 25H.0, $
	;SUBINDO O RECIPIENTE
	CLR 25H.0
	CLR P2.7
	SETB P2.6
	;;ESPERA PELA INTERRUPCAO DO SENSOR2
	JNB 25H.1, $
	CLR 25H.1
	;CHECA SE JA FEZ TRES VEZES, SE NAO REINICIA
	DJNZ A, VOLTA
FIM:	SJMP FIM

INTE0:	;DESLIGA O MOTOR, LIGA O AQUECIMENTO
	CLR EA
	CLR P2.6
	SETB P1.2
	ACALL DELAY
	;DESLIGA AQUECIMENTO
	SETB 25H.0
	CLR P1.2
	SETB EA
	RETI

INTE1:	;DESLIGA O MOTOR, LIGA RESFRIAMENTO
	CLR EA
	CLR P2.6
	SETB P1.0
	ACALL DELAY
	;DESLIGA RESFRIAMENTO
	SETB 25H.1
	CLR P1.0
	SETB EA
	RETI

DELAY:	MOV R2, #100 ; C = ((R2*2 + 3)*R1 + 3)*R2 + 3
LOOP2:	MOV R1, #200
LOOP1:	MOV R0, #11
	DJNZ R0, $
	DJNZ R1, LOOP1
	DJNZ R2, LOOP2
	RET

	END