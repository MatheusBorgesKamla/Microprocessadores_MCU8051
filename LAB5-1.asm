	ORG 0

	MOV SCON, #01000000B
	MOV TMOD, #00100000B
	MOV TH1, #253
	MOV TL1, #253
	MOV P2, #00H
	SETB TR1

RECEBE:	SETB REN
	JNB RI, $
	MOV A, SBUF
TVERDE:	CJNE A, #'G', TAMA
	SJMP VERDE
TAMA:	CJNE A, #'Y', TVERM
	SJMP AMAR
TVERM:	CJNE A, #'R', TRESET
	SJMP VERM
TRESET:	CJNE A, #'D', VOLTA
	SJMP RESET
VOLTA: 	CLR RI
	SJMP RECEBE

VERDE:	SETB P2.0
	MOV SBUF, #'G'
	ACALL ENVIA
	MOV SBUF, #'R'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'N'
	ACALL ENVIA
	SJMP VOLTA

AMAR:	SETB P2.1
	MOV SBUF, #'Y'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'L'
	ACALL ENVIA
	MOV SBUF, #'L'
	ACALL ENVIA
	MOV SBUF, #'O'
	ACALL ENVIA
	MOV SBUF, #'W'
	ACALL ENVIA
	SJMP VOLTA
	
VERM:	SETB P2.2
	MOV SBUF, #'R'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'D'
	ACALL ENVIA
	SJMP VOLTA

RESET:	MOV P2, #00H
	SJMP VOLTA
	
ENVIA:	JNB TI, $
	CLR TI
	RET