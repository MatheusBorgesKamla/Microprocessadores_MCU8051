	ORG 0
FLAG1	EQU	30H
	SJMP PROG

	ORG 0023H
	CLR EA
	JNB TI, FIM1
	CLR TI
	SJMP FIM2
FIM1:	MOV A, SBUF
	CLR RI
FIM2:	SETB EA
	SETB FLAG1
	RETI
	
PROG:	MOV TMOD, #00100000B
	MOV SCON, #01000000B
	MOV TH1, #253
	MOV TL1, #253
	MOV P2, #00H
	MOV IE, #10010000B
	SETB TR1
	SETB REN
	
LOOPI:	CLR FLAG1
	JNB FLAG1, $
	
TVERDE:	CJNE A, #'G', TAMAR
	SJMP VERDE
	
TAMAR:	CJNE A, #'Y', TVERM
	SJMP AMAR
	
TVERM:	CJNE A, #'R', TRESET
	SJMP VERM
	
TRESET:	CJNE A, #'D', VOLTA
	SJMP RESET
	
VOLTA: 	CLR RI
	SJMP LOOPI
	
VERDE:	SETB P2.0
	MOV SBUF, #'G'
	ACALL ENVIA
	MOV SBUF, #'R'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'N'
	ACALL ENVIA
	SJMP VOLTA

AMAR:	SETB P2.1
	MOV SBUF, #'Y'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'L'
	ACALL ENVIA
	MOV SBUF, #'L'
	ACALL ENVIA
	MOV SBUF, #'O'
	ACALL ENVIA
	MOV SBUF, #'W'
	ACALL ENVIA
	SJMP VOLTA
	
VERM:	SETB P2.2
	MOV SBUF, #'R'
	ACALL ENVIA
	MOV SBUF, #'E'
	ACALL ENVIA
	MOV SBUF, #'D'
	ACALL ENVIA
	SJMP VOLTA

RESET:	MOV P2, #00H
	SJMP VOLTA
	
ENVIA:	JNB TI, $
	CLR TI
	RET
	
	END